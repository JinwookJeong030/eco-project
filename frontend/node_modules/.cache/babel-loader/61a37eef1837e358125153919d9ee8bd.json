{"ast":null,"code":"import axios from '../../../node_modules/axios/index';\nimport client from './client';\nconst JWT_EXPIRRY_TIME = 24 * 3600 * 1000;\nexport const login = _ref => {\n  let {\n    user_email,\n    user_password\n  } = _ref;\n  return client.post('/auth/login', {\n    user_email,\n    user_password\n  }).then(response => {\n    onLoginSuccess(response);\n    return response;\n  });\n};\nexport const onRefresh = () => {\n  axios.get('/auth/refresh').then(response => {\n    onLoginSuccess(response);\n    return response;\n  });\n};\n\nconst onLoginSuccess = response => {\n  localStorage.setItem('accessToken', response.data.result.accessToken);\n  localStorage.setItem('refreshToken', response.data.result.refreshToken);\n  client.defaults.headers.common[\"authorization\"] = `Bearer ${localStorage.getItem('accessToken')}`;\n  client.defaults.headers.common[\"refresh\"] = `${localStorage.getItem('refreshToken')}`; // accessToken 만료하기 1분 전에 로그인 연장\n\n  setTimeout(onRefresh, JWT_EXPIRRY_TIME - 60000);\n};\n\nexport const register = _ref2 => {\n  let {\n    user_email,\n    user_password,\n    user_name\n  } = _ref2;\n  return client.post('/auth/register', {\n    user_email,\n    user_password,\n    user_name\n  });\n};\nexport const check = () => client.get('/auth/check');\nexport const logout = () => client.post('/auth/logout');","map":{"version":3,"names":["axios","client","JWT_EXPIRRY_TIME","login","user_email","user_password","post","then","response","onLoginSuccess","onRefresh","get","localStorage","setItem","data","result","accessToken","refreshToken","defaults","headers","common","getItem","setTimeout","register","user_name","check","logout"],"sources":["C:/Users/qhstj/OneDrive/문서/GitHub/eco-project/frontend/src/lib/api/auth.js"],"sourcesContent":["import axios from '../../../node_modules/axios/index';\r\nimport client from './client';\r\n\r\nconst JWT_EXPIRRY_TIME = 24 * 3600 * 1000;\r\n\r\nexport const login = ({ user_email, user_password }) =>\r\n  client\r\n    .post('/auth/login', { user_email, user_password }).then(response=>{      \r\n  onLoginSuccess(response);\r\nreturn response;});\r\n\r\nexport const onRefresh = () => {\r\n  axios\r\n    .get('/auth/refresh')\r\n    .then(response=>{\r\n      onLoginSuccess(response);\r\n    return response;})\r\n    ;\r\n};\r\n\r\nconst onLoginSuccess = (response) => {\r\n\r\n  localStorage.setItem('accessToken',response.data.result.accessToken);\r\n  localStorage.setItem('refreshToken',response.data.result.refreshToken);\r\n  client.defaults.headers.common[\"authorization\"] = `Bearer ${localStorage.getItem('accessToken')}`;\r\n  client.defaults.headers.common[\"refresh\"] = `${localStorage.getItem('refreshToken')}`;\r\n  // accessToken 만료하기 1분 전에 로그인 연장\r\n  setTimeout(onRefresh, JWT_EXPIRRY_TIME - 60000);\r\n};\r\n\r\nexport const register = ({ user_email, user_password, user_name }) =>\r\n  client.post('/auth/register', { user_email, user_password, user_name });\r\n\r\nexport const check = () => client.get('/auth/check');\r\n\r\nexport const logout = () => client.post('/auth/logout');\r\n"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,mCAAlB;AACA,OAAOC,MAAP,MAAmB,UAAnB;AAEA,MAAMC,gBAAgB,GAAG,KAAK,IAAL,GAAY,IAArC;AAEA,OAAO,MAAMC,KAAK,GAAG;EAAA,IAAC;IAAEC,UAAF;IAAcC;EAAd,CAAD;EAAA,OACnBJ,MAAM,CACHK,IADH,CACQ,aADR,EACuB;IAAEF,UAAF;IAAcC;EAAd,CADvB,EACsDE,IADtD,CAC2DC,QAAQ,IAAE;IACrEC,cAAc,CAACD,QAAD,CAAd;IACF,OAAOA,QAAP;EAAiB,CAHf,CADmB;AAAA,CAAd;AAMP,OAAO,MAAME,SAAS,GAAG,MAAM;EAC7BV,KAAK,CACFW,GADH,CACO,eADP,EAEGJ,IAFH,CAEQC,QAAQ,IAAE;IACdC,cAAc,CAACD,QAAD,CAAd;IACF,OAAOA,QAAP;EAAiB,CAJnB;AAMD,CAPM;;AASP,MAAMC,cAAc,GAAID,QAAD,IAAc;EAEnCI,YAAY,CAACC,OAAb,CAAqB,aAArB,EAAmCL,QAAQ,CAACM,IAAT,CAAcC,MAAd,CAAqBC,WAAxD;EACAJ,YAAY,CAACC,OAAb,CAAqB,cAArB,EAAoCL,QAAQ,CAACM,IAAT,CAAcC,MAAd,CAAqBE,YAAzD;EACAhB,MAAM,CAACiB,QAAP,CAAgBC,OAAhB,CAAwBC,MAAxB,CAA+B,eAA/B,IAAmD,UAASR,YAAY,CAACS,OAAb,CAAqB,aAArB,CAAoC,EAAhG;EACApB,MAAM,CAACiB,QAAP,CAAgBC,OAAhB,CAAwBC,MAAxB,CAA+B,SAA/B,IAA6C,GAAER,YAAY,CAACS,OAAb,CAAqB,cAArB,CAAqC,EAApF,CALmC,CAMnC;;EACAC,UAAU,CAACZ,SAAD,EAAYR,gBAAgB,GAAG,KAA/B,CAAV;AACD,CARD;;AAUA,OAAO,MAAMqB,QAAQ,GAAG;EAAA,IAAC;IAAEnB,UAAF;IAAcC,aAAd;IAA6BmB;EAA7B,CAAD;EAAA,OACtBvB,MAAM,CAACK,IAAP,CAAY,gBAAZ,EAA8B;IAAEF,UAAF;IAAcC,aAAd;IAA6BmB;EAA7B,CAA9B,CADsB;AAAA,CAAjB;AAGP,OAAO,MAAMC,KAAK,GAAG,MAAMxB,MAAM,CAACU,GAAP,CAAW,aAAX,CAApB;AAEP,OAAO,MAAMe,MAAM,GAAG,MAAMzB,MAAM,CAACK,IAAP,CAAY,cAAZ,CAArB"},"metadata":{},"sourceType":"module"}